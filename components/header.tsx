'use client';

import React, { useState } from "react";
import { NavButton } from "@/components/ui/nav";
import type { NavItem } from "@/types/payload";

interface HeaderProps {
  navItems?: NavItem[];
}

const defaultNavItems: NavItem[] = [
  { label: "INÍCIO", href: "/" },
  { label: "SINDICATO", href: "/sindicato" },
  { label: "JURÍDICO", href: "/juridico" },
  { label: "PUBLICAÇÕES", href: "/publicacoes" },
  { label: "SERVIÇOS", href: "/servicos" },
  { label: "NEWSLETTER", href: "/newsletter" },
  { label: "CONTATO", href: "/contato" },
];

export default function Header({ navItems = defaultNavItems }: HeaderProps) {
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  // Separate regular links from button items
  const linkItems = navItems.filter(item => !item.isButton);
  const buttonItems = navItems.filter(item => item.isButton);

  return (
    <header>
      <div className="mx-auto max-w-7xl px-4 md:px-8">
        <div className="relative flex h-16 items-center justify-between">
          {/* Logo */}
          <div className="flex items-center">
            <a className="block text-brand-500 flex items-center gap-2 mt-2" href="/">
              <svg width="37" height="66" viewBox="0 0 900 1600" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill="#0100A2" d="M317.328 912.105L696.747 913.141C696.924 920.404 696.815 928.052 696.826 935.348C657.632 935.85 618.435 936.057 579.237 935.967L345.245 936.039C295.499 936.287 245.751 936.092 196.009 935.455C195.617 927.403 195.788 920.705 196.029 912.691C235.237 911.373 277.628 912.495 317.328 912.105Z"/>
                <path fill="#0100A2" d="M677.647 703.525C683.912 703.285 690.585 703.295 696.887 703.194L696.879 725.941C676.956 725.267 653.2 725.99 633.154 726.186L542.08 726.527L218.061 726.444L200.489 726.376C199.55 722.322 198.318 718.164 197.192 714.145C198.331 711.183 199.448 707.033 200.388 703.916C240.941 703.092 281.916 704.087 322.501 703.794C440.591 702.941 559.68 705.251 677.647 703.525Z"/>
                <path fill="#0100A2" d="M196.406 948.821C212.939 947.667 239.466 948.405 256.445 948.386L371.203 948.399L696.72 948.519C696.865 953.661 697.274 965.558 696.46 970.102L695.218 970.742C650.463 972.046 599.991 970.457 554.657 970.555L195.834 971.05C195.589 965.772 194.868 953.745 196.406 948.821Z"/>
                <path fill="#0100A2" d="M196.061 669.128C227.768 669.794 261.636 669.076 293.522 669.073L469.485 669.132L612.733 668.986C640.471 668.984 669.105 669.372 696.774 668.723C697.385 677.17 697.43 681.985 696.954 690.435L195.954 691.189C195.711 683.836 195.746 676.477 196.061 669.128Z"/>
                <path fill="#0100A2" d="M406.133 746.986L449.976 747.04C453.594 756.717 458.157 765.953 461.907 775.528C462.921 778.118 462.96 786.915 463.163 790.222C464.481 791.156 464.951 791.558 466.12 792.673C467.559 803.191 467.012 834.205 467.096 846.265C465.71 848.053 464.353 849.863 463.025 851.694L463.298 863.004C460.8 866.445 456.625 876.469 454.683 880.819C452.387 885.232 451.962 887.289 450.743 892.031L406.034 892.065C405.87 886.013 405.95 879.339 406.094 873.282C407.088 831.416 404.845 788.73 406.133 746.986ZM428.088 861.526C431.313 861.559 437.267 861.932 440.072 860.919L440.618 859.179C442.701 851.745 445.191 850.774 445.382 842.49C445.721 827.805 445.487 813.054 445.374 798.381C439.308 791.898 441.69 787.944 440.728 778.945L428.836 778.371C426.56 786.737 427.069 850.824 428.088 861.526Z"/>
                <path fill="#0100A2" d="M326.524 747.128C332.419 747.306 337.507 747.083 343.397 746.82C347.789 761.237 352.322 761.409 352.309 778.748C358.938 787.818 360.306 795.279 360.164 805.916C363.666 810.085 365.118 815.809 367.444 817.245L368.835 816.495C371.239 807.606 370.1 759.882 370.303 746.95C375.217 747.329 382.43 747.162 387.521 747.183C388.487 777.312 386.924 810.382 387.543 840.903C387.718 849.521 388.052 885.969 387.211 891.914L370.568 891.571C369.674 886.291 365.579 879.335 363.553 873.853C361.873 869.307 362.632 862.997 361.872 861.031C356.98 848.377 354.239 848.371 353.852 834.219C351.353 831.1 349.206 825.217 347.464 821.312L346.677 821.326C343.317 825.587 344.253 843.929 344.258 850.292C344.358 864.278 344.291 878.265 344.058 892.25L326.615 892.311C326.097 845.477 325.913 793.983 326.524 747.128Z"/>
                <path fill="#0100A2" d="M480.786 747.474C499.974 747.676 519.164 747.71 538.352 747.575C538.582 757.852 538.374 768.64 538.319 778.964C526.636 778.967 514.954 778.793 503.276 778.442C502.896 785.977 502.942 792 503.143 799.559C513.02 799.205 524.381 799.421 534.367 799.388C534.577 809.852 534.368 820.715 534.302 831.215L503.206 831.058C502.495 841.903 502.266 849.123 503.194 859.93C506.405 861.707 532.788 860.811 538.015 860.746C538.413 870.572 538.164 882.336 538.198 892.304L481.288 892.164C480.046 876.698 480.94 845.697 480.974 829.48C481.029 802.792 480.042 773.82 480.786 747.474Z"/>
                <path fill="#0100A2" d="M560.621 747.568L593.338 747.505C595.14 754.165 602.377 770.823 606.023 776.703C606.126 780.344 605.603 784.335 605.229 787.988C597.706 788.542 591.866 788.373 584.351 788.044L582.694 778.936L571.234 778.864C570.155 786.357 570.419 792.606 571.042 800.07L585.645 799.763L586.843 809.067L597.431 809.309C597.977 811.998 598.208 813.405 599.282 816.001C600.965 817.865 601.718 817.928 604.107 818.378L604.828 818.508C606.123 821.744 605.977 828.42 606.478 832.65C610.76 837.393 609.441 839.793 610.096 845.61C611.8 860.759 606.808 869.578 600.869 882.894C598.644 882.96 598.3 883.039 596.193 883.765C593.993 885.607 593.956 889.149 593.556 892.125L582.422 892.056L560.634 891.867C560.342 888.947 560.019 886.031 559.667 883.117C557.282 882.525 556.048 882.56 553.635 882.467C549.983 878.95 546.658 856.976 544.079 851.249C543.766 850.554 544.397 844.987 544.539 843.778C551.896 844.05 558.562 844.027 565.929 843.914C566.784 851.058 570.899 853.835 571.289 861.121L582.666 861.103C583.407 856.781 587.409 848.82 587.273 846.24C587.129 843.521 583.637 835.725 583.255 830.983L568.162 831.272L567.022 821.864L556.733 821.757C555.432 813.225 552.001 809.331 549.246 802.037C547.04 796.198 547.803 782.361 547.883 775.553C551.335 771.838 559.887 752.631 560.621 747.568Z"/>
                <path fill="#0100A2" d="M223.884 747.593L256.015 747.526C261.856 763.82 269.74 770.928 269.171 787.241C262.049 787.2 254.928 787.059 247.809 786.819L246.513 778.354L234.212 778.381C233.062 785 233.409 793.703 233.601 800.416C238.379 800.185 243.951 800.244 248.791 800.187C249.217 803.062 250.003 806.44 250.601 809.333C253.814 808.82 257.838 808.749 261.156 808.598C261.595 811.58 261.364 815.275 262.8 817.441C265.819 816.469 265.936 816.333 268.415 818.098C268.613 820.132 268.86 826.138 269.531 827.607C275.515 840.725 273.804 873.575 262.293 883.31C260.556 883.115 260.359 883.045 258.672 883.396C257 885.555 256.894 889.221 256.556 892.062L247.852 892.018L223.63 892.029C223.46 889.126 223.573 886.513 222.363 883.924C219.481 882.527 219.562 883.085 215.88 883.384C212.751 872.057 211.429 873.164 211.614 860.039L207.688 854.463L207.878 842.945C214.876 842.643 221.634 842.922 228.621 843.144C229.441 852.392 233.273 852.346 234.215 861.801L246.264 862.087C246.518 859.665 246.913 856.157 248.135 854.131C254.262 843.976 247.293 840.146 246.536 830.525L231.52 830.046L230.454 821.287L219.85 821.498C217.915 814.362 214.108 808.424 212.935 804.001C209.825 790.452 210.641 777.192 217.377 764.831C219.878 760.241 223.567 752.327 223.884 747.593Z"/>
                <path fill="#0100A2" d="M639.386 747.557L668.49 747.502C668.634 748.167 670.151 755.109 670.186 755.121C687.978 760.949 680.032 781.63 676.87 796.212L663.58 796.182C662.129 789.535 658.636 784.546 658.453 778.175L646.324 778.243C646.16 782.384 646.185 790.432 644.841 794.647C644.866 794.568 641.966 797.544 641.927 797.853C640.132 812.058 640.485 832.739 641.629 846.907C641.865 849.838 645.478 855.559 646.402 860.17L646.558 860.981C651.583 861.051 656.775 860.901 661.812 860.823C662.344 858.62 667.144 846.526 668.286 843.27L669.794 842.663C671.961 843.585 672.824 843.453 675.108 843.33L675.848 843.287C678.8 843.293 682.114 842.897 684.38 844.2C686.193 849.123 678.97 879.103 675.369 883.545C673.507 883.703 672.946 883.818 671.15 884.337C669.166 886.249 669.123 889.502 668.689 892.436L639.789 892.106C638.605 884.432 639.947 885.187 633.532 883.691C626.864 876.214 623.16 861.909 623.37 851.697L619.351 845.966C619.551 829.725 618.52 810.157 619.997 793.885C620.137 792.35 622.401 789.587 623.461 788.303C623.505 779.689 627.954 756.563 637.652 755.204C639.293 753.232 639.144 750.297 639.386 747.557Z"/>
                <path fill="#0100A2" d="M287.102 747.356L308.471 747.333C308.972 764.407 308.576 783.644 308.581 800.932L308.481 892.11L286.81 892.134C286.163 855.742 287.262 819.035 286.769 782.61C286.613 771.005 286.564 758.913 287.102 747.356Z"/>
              </svg>
              <div className="flex flex-col text-sm font-semibold text-brand-500">
                <span>SINDESC</span>
                <span>CASTANHAL</span>
              </div>
            </a>
          </div>

          {/* Desktop Navigation - Centralizado */}
          <nav
            aria-label="Global"
            className="hidden lg:flex absolute left-1/2 -translate-x-1/2"
          >
            <ul className="flex items-center gap-8 text-sm">
              {linkItems.map((item, index) => (
                <li key={`${item.href}-${index}`}>
                  <a
                    className="text-primary transition hover:text-brand-600 font-medium"
                    href={item.href}
                  >
                    {item.label}
                  </a>
                </li>
              ))}
            </ul>
          </nav>

          {/* Botões de ação e menu mobile */}
          <div className="flex items-center gap-4">
            <div className="hidden sm:flex sm:gap-4">
              {buttonItems.map((item, index) => (
                <NavButton key={`btn-${item.href}-${index}`} label={item.label} href={item.href} />
              ))}
            </div>

            {/* Hamburger Menu Button */}
            <button
              className="lg:hidden rounded bg-gray-100 p-2 text-gray-600 transition hover:text-gray-600/75"
              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
              aria-label="Toggle menu"
            >
              {mobileMenuOpen ? (
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  className="size-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  strokeWidth={2}
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              ) : (
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  className="size-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  strokeWidth={2}
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="M4 6h16M4 12h16M4 18h16"
                  />
                </svg>
              )}
            </button>
          </div>
        </div>

        {/* Mobile Menu */}
        {mobileMenuOpen && (
          <div className="lg:hidden border-t border-gray-200 py-4">
            <nav aria-label="Mobile">
              <ul className="flex flex-col space-y-3">
                {linkItems.map((item, index) => (
                  <li key={`mobile-${item.href}-${index}`}>
                    <a
                      className="block text-primary transition hover:text-brand-600 font-medium py-2"
                      href={item.href}
                      onClick={() => setMobileMenuOpen(false)}
                    >
                      {item.label}
                    </a>
                  </li>
                ))}
                {buttonItems.map((item, index) => (
                  <li key={`mobile-btn-${item.href}-${index}`} className="pt-2 sm:hidden">
                    <NavButton label={item.label} href={item.href} />
                  </li>
                ))}
              </ul>
            </nav>
          </div>
        )}
      </div>
    </header>
  );
}
